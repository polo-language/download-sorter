apply plugin: 'java'
apply plugin: 'jacoco'

repositories {
    mavenCentral()
}

dependencies {
    testCompile 'junit:junit:4.12'
}

final String testDirName = 'test'
final String testOriginalsDirName = 'originals'
final String testOutPath = "$buildDir/tmp-test"
final String singleRunPath = "$testOutPath/singlerun"

task testPrepCleanup(type: Delete) {
    delete fileTree(dir: testOutPath, include: '*')
}

task testPrepDuplicateInputs(type: Copy) {
    from "$testDirName/$testOriginalsDirName"
    into singleRunPath
}

test {
    dependsOn {
        testPrepCleanup
        testPrepDuplicateInputs
    }

    systemProperty "TEST_OUT_PATH", testOutPath
    systemProperty "SINGLERUN_PATH", singleRunPath
}
